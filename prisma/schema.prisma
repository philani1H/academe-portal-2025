generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id                    Int                    @id @default(autoincrement())
  name                  String
  email                 String                 @unique
  studentNumber         String?                @unique @map("student_number")
  programCode           Int?                   @map("program_code")
  personalEmail         String?                @map("personal_email")
  password_hash         String
  role                  String
  department            String?
  subjects              String?
  createdAt             DateTime?              @default(now()) @map("created_at")
  updatedAt             DateTime?              @default(now()) @updatedAt @map("updated_at")
  assignmentSubmissions AssignmentSubmission[]
  courseEnrollments     CourseEnrollment[]
  courses               Course[]
  financialRecords      FinancialRecord[]
  notifications         Notification[]
  payslips              Payslip[]
  scheduledSessions     ScheduledSession[]
  testSubmissions       TestSubmission[]
  timetableDocuments    TimetableDocument[]
  timetableEntries      TimetableEntry[]

  @@map("users")
}

model ScheduledSession {
  id          String       @id @default(uuid())
  title       String
  description String?
  duration    Int
  status      String       @default("scheduled")
  courseId    Int          @map("course_id")
  createdAt   DateTime     @default(now()) @map("created_at")
  scheduledAt DateTime     @map("scheduled_at")
  sessionId   String?      @map("session_id")
  tutorId     Int          @map("tutor_id")
  updatedAt   DateTime     @updatedAt @map("updated_at")
  liveSession LiveSession?
  course      Course       @relation(fields: [courseId], references: [id], onDelete: Cascade)
  tutor       User         @relation(fields: [tutorId], references: [id], onDelete: Cascade)

  @@map("scheduled_sessions")
}

model LiveSession {
  id               String                   @id @default(uuid())
  scheduledId      String?                  @unique @map("scheduled_id")
  sessionId        String                   @unique @map("session_id")
  courseId         Int                      @map("course_id")
  tutorId          Int                      @map("tutor_id")
  startTime        DateTime                 @default(now()) @map("start_time")
  endTime          DateTime?                @map("end_time")
  status           String                   @default("active")
  participantCount Int                      @default(0) @map("participant_count")
  createdAt        DateTime                 @default(now()) @map("created_at")
  updatedAt        DateTime                 @updatedAt @map("updated_at")
  participants     LiveSessionParticipant[]
  scheduledSession ScheduledSession?        @relation(fields: [scheduledId], references: [id], onDelete: SetNull)

  @@index([sessionId])
  @@index([courseId])
  @@map("live_sessions")
}

model LiveSessionParticipant {
  id            String      @id @default(uuid())
  liveSessionId String      @map("live_session_id")
  userId        Int?        @map("user_id")
  socketId      String      @map("socket_id")
  userName      String      @map("user_name")
  userRole      String      @map("user_role")
  joinedAt      DateTime    @default(now()) @map("joined_at")
  leftAt        DateTime?   @map("left_at")
  liveSession   LiveSession @relation(fields: [liveSessionId], references: [id], onDelete: Cascade)

  @@index([liveSessionId])
  @@index([socketId])
  @@map("live_session_participants")
}

model AdminUser {
  id            Int      @id @default(autoincrement())
  username      String   @unique
  displayName   String?  @map("display_name")
  email         String?  @unique
  personalEmail String?  @map("personal_email")
  passwordHash  String   @map("password_hash")
  permissions   String?
  createdAt     DateTime @default(now()) @map("created_at")
  updatedAt     DateTime @default(now()) @updatedAt @map("updated_at")

  @@map("admin_users")
}

model Course {
  id                Int                  @id @default(autoincrement())
  name              String
  description       String?
  category          String?
  department        String?
  tutorId           Int?                 @map("tutor_id")
  createdAt         DateTime?            @default(now()) @map("created_at")
  updatedAt         DateTime?            @default(now()) @updatedAt @map("updated_at")
  assignments       Assignment[]
  announcements     CourseAnnouncement[]
  courseEnrollments CourseEnrollment[]
  materials         CourseMaterial[]
  tutor             User?                @relation(fields: [tutorId], references: [id], onDelete: SetNull)
  scheduledSessions ScheduledSession[]
  tests             Test[]
  timetableEntries  TimetableEntry[]

  @@map("courses")
}

model CourseMaterial {
  id          String   @id @default(uuid())
  courseId    Int      @map("course_id")
  name        String
  type        String
  url         String
  description String?
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")
  course      Course   @relation(fields: [courseId], references: [id], onDelete: Cascade)

  @@map("course_materials")
}

model CourseAnnouncement {
  id        String   @id @default(uuid())
  courseId  Int      @map("course_id")
  title     String
  content   String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  course    Course   @relation(fields: [courseId], references: [id], onDelete: Cascade)

  @@map("course_announcements")
}

model CourseEnrollment {
  id        String   @id @default(uuid())
  userId    Int      @map("user_id")
  courseId  Int      @map("course_id")
  status    String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  course    Course   @relation(fields: [courseId], references: [id], onDelete: Cascade)
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, courseId])
  @@map("course_enrollments")
}

model Test {
  id          String           @id @default(uuid())
  title       String
  courseId    Int              @map("course_id")
  createdAt   DateTime         @default(now()) @map("created_at")
  updatedAt   DateTime         @updatedAt @map("updated_at")
  description String?
  dueDate     String?          @map("due_date")
  totalPoints Int?             @default(0) @map("total_points")
  questions   TestQuestion[]
  submissions TestSubmission[]
  course      Course           @relation(fields: [courseId], references: [id], onDelete: Cascade)

  @@map("tests")
}

model TestQuestion {
  id       String @id @default(uuid())
  testId   String @map("test_id")
  question String
  options  String
  answer   String
  test     Test   @relation(fields: [testId], references: [id], onDelete: Cascade)

  @@map("test_questions")
}

model TestSubmission {
  id        String   @id @default(uuid())
  userId    Int      @map("user_id")
  testId    String   @map("test_id")
  answers   String
  score     Float
  createdAt DateTime @default(now()) @map("created_at")
  test      Test     @relation(fields: [testId], references: [id], onDelete: Cascade)
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, testId])
  @@map("test_submissions")
}

model Assignment {
  id          String                 @id @default(uuid())
  courseId    Int                    @map("course_id")
  title       String
  description String
  dueDate     DateTime               @map("due_date")
  maxPoints   Int                    @default(100) @map("max_points")
  attachments String?
  createdAt   DateTime               @default(now()) @map("created_at")
  updatedAt   DateTime               @updatedAt @map("updated_at")
  submissions AssignmentSubmission[]
  course      Course                 @relation(fields: [courseId], references: [id], onDelete: Cascade)

  @@map("assignments")
}

model AssignmentSubmission {
  id           String     @id @default(uuid())
  userId       Int        @map("user_id")
  assignmentId String     @map("assignment_id")
  content      String
  attachments  String?
  status       String     @default("submitted")
  score        Float?
  feedback     String?
  submittedAt  DateTime   @default(now()) @map("submitted_at")
  gradedAt     DateTime?  @map("graded_at")
  assignment   Assignment @relation(fields: [assignmentId], references: [id], onDelete: Cascade)
  user         User       @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, assignmentId])
  @@map("assignment_submissions")
}

model Notification {
  id        String   @id @default(uuid())
  userId    Int      @map("user_id")
  title     String?
  message   String
  type      String?
  read      Boolean  @default(false)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId, read])
  @@map("notifications")
}

model HeroContent {
  id                  String   @id @default(uuid())
  title               String
  subtitle            String
  description         String
  buttonText          String
  secondaryButtonText String
  trustIndicatorText  String
  universities        String
  features            String
  backgroundGradient  String
  isActive            Boolean  @default(true)
  createdAt           DateTime @default(now()) @map("created_at")
  updatedAt           DateTime @updatedAt @map("updated_at")

  @@map("hero_content")
}

model Feature {
  id          String   @id @default(uuid())
  title       String
  description String
  icon        String
  benefits    String
  isActive    Boolean  @default(true)
  order       Int      @default(0)
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  @@map("features")
}

model PricingPlan {
  id          String   @id @default(uuid())
  name        String
  price       String
  period      String
  features    String
  notIncluded String   @map("not_included")
  color       String
  icon        String
  popular     Boolean  @default(false)
  isActive    Boolean  @default(true)
  order       Int      @default(0)
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  @@map("pricing_plans")
}

model Testimonial {
  id          String   @id @default(uuid())
  content     String
  author      String
  role        String
  subject     String
  improvement String
  image       String
  rating      Int      @default(5)
  isActive    Boolean  @default(true)
  order       Int      @default(0)
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  @@map("testimonials")
}

model TeamMember {
  id        String   @id @default(uuid())
  name      String
  role      String
  bio       String
  image     String
  isActive  Boolean  @default(true)
  order     Int      @default(0)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("team_members")
}

model AboutUsContent {
  id                    String   @id @default(uuid())
  goal                  String
  mission               String
  rolesResponsibilities String   @map("roles_responsibilities")
  isActive              Boolean  @default(true)
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")

  @@map("about_us_content")
}

model ContactInfo {
  id        String   @id @default(uuid())
  type      String
  label     String
  value     String
  icon      String?
  isActive  Boolean  @default(true)
  order     Int      @default(0)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("contact_info")
}

model SiteSettings {
  id        String   @id @default(uuid())
  key       String   @unique
  value     String
  type      String
  label     String
  category  String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("site_settings")
}

model Tutor {
  id           String   @id @default(uuid())
  name         String
  subjects     String
  image        String
  contactName  String   @map("contact_name")
  contactPhone String   @map("contact_phone")
  contactEmail String   @map("contact_email")
  description  String
  ratings      String
  isActive     Boolean  @default(true)
  order        Int      @default(0)
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  @@map("tutors")
}

model Subject {
  id            String   @id @default(uuid())
  name          String
  description   String
  image         String
  category      String
  tutorsCount   Int      @default(0) @map("tutors_count")
  popularTopics String   @map("popular_topics")
  difficulty    String
  isActive      Boolean  @default(true)
  order         Int      @default(0)
  createdAt     DateTime @default(now()) @map("created_at")
  updatedAt     DateTime @updatedAt @map("updated_at")

  @@map("subjects")
}

model FooterContent {
  id            String   @id @default(uuid())
  companyName   String   @map("company_name")
  tagline       String
  contactPhone  String   @map("contact_phone")
  contactEmail  String   @map("contact_email")
  contactPerson String   @map("contact_person")
  whatsappLink  String   @map("whatsapp_link")
  socialLinks   String   @map("social_links")
  quickLinks    String   @map("quick_links")
  resourceLinks String   @map("resource_links")
  copyrightText String   @map("copyright_text")
  isActive      Boolean  @default(true)
  createdAt     DateTime @default(now()) @map("created_at")
  updatedAt     DateTime @updatedAt @map("updated_at")

  @@map("footer_content")
}

model NavigationItem {
  id        String   @id @default(uuid())
  path      String
  label     String
  type      String
  isActive  Boolean  @default(true)
  order     Int      @default(0)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("navigation_items")
}

model BecomeTutorContent {
  id             String   @id @default(uuid())
  title          String
  description    String
  requirements   String
  benefits       String
  applicationUrl String   @map("application_url")
  formEmbedCode  String?  @map("form_embed_code")
  isActive       Boolean  @default(true)
  createdAt      DateTime @default(now()) @map("created_at")
  updatedAt      DateTime @updatedAt @map("updated_at")

  @@map("become_tutor_content")
}

model ExamRewriteContent {
  id                 String   @id @default(uuid())
  title              String
  description        String
  heroTitle          String   @map("hero_title")
  heroDescription    String   @map("hero_description")
  benefits           String
  process            String
  subjects           String
  applicationFormUrl String   @map("application_form_url")
  grade11FormUrl     String?  @map("grade11_form_url")
  grade12FormUrl     String?  @map("grade12_form_url")
  pricingInfo        String   @map("pricing_info")
  isActive           Boolean  @default(true)
  createdAt          DateTime @default(now()) @map("created_at")
  updatedAt          DateTime @updatedAt @map("updated_at")

  @@map("exam_rewrite_content")
}

model ContactUsContent {
  id           String   @id @default(uuid())
  title        String
  description  String
  logo         String
  formEndpoint String   @map("form_endpoint")
  contactInfo  String   @map("contact_info")
  isActive     Boolean  @default(true)
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  @@map("contact_us_content")
}

model UniversityApplicationContent {
  id           String   @id @default(uuid())
  title        String
  description  String
  services     String
  process      String
  requirements String
  pricing      String
  formUrl      String?  @map("form_url")
  isActive     Boolean  @default(true)
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  @@map("university_application_content")
}

model Email {
  id        String   @id @default(uuid())
  from      String
  fromName  String   @map("from_name")
  to        String
  subject   String
  body      String
  htmlBody  String?  @map("html_body")
  timestamp DateTime @default(now())
  read      Boolean  @default(false)
  starred   Boolean  @default(false)
  folder    String   @default("inbox")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([to, folder])
  @@index([from, folder])
  @@map("emails")
}

model Payslip {
  id          String   @id @default(uuid())
  userId      Int      @map("user_id")
  month       String
  year        Int
  basicSalary Float    @map("basic_salary")
  allowances  Float    @default(0)
  deductions  Float    @default(0)
  netSalary   Float    @map("net_salary")
  paymentDate String?  @map("payment_date")
  status      String   @default("pending")
  notes       String?
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("payslips")
}

model FinancialRecord {
  id              String   @id @default(uuid())
  type            String
  category        String
  amount          Float
  description     String?
  date            String
  userId          Int?     @map("user_id")
  status          String   @default("completed")
  referenceNumber String?  @map("reference_number")
  paymentMethod   String?  @map("payment_method")
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")
  user            User?    @relation(fields: [userId], references: [id], onDelete: SetNull)

  @@map("financial_records")
}

model TimetableEntry {
  id        String   @id @default(uuid())
  day       String
  timeSlot  String   @map("time_slot")
  courseId  Int      @map("course_id")
  tutorId   Int      @map("tutor_id")
  room      String?
  grade     String?
  students  String?
  type      String   @default("lecture")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  course    Course   @relation(fields: [courseId], references: [id], onDelete: Cascade)
  tutor     User     @relation(fields: [tutorId], references: [id], onDelete: Cascade)

  @@map("timetable_entries")
}

model TimetableDocument {
  id         String   @id @default(uuid())
  filename   String
  filePath   String   @map("file_path")
  uploadedBy Int      @map("uploaded_by")
  processed  Boolean  @default(false)
  createdAt  DateTime @default(now()) @map("created_at")
  uploader   User     @relation(fields: [uploadedBy], references: [id], onDelete: Cascade)

  @@map("timetable_documents")
}

model Channel {
  id          String           @id @default(uuid())
  name        String
  description String?
  type        String           @default("team")
  department  String?
  isPrivate   Boolean          @default(false) @map("is_private")
  createdAt   DateTime         @default(now()) @map("created_at")
  updatedAt   DateTime         @updatedAt @map("updated_at")
  members     ChannelMember[]
  messages    ChannelMessage[]

  @@map("channels")
}

model ChannelMember {
  id        String   @id @default(uuid())
  channelId String   @map("channel_id")
  userId    Int      @map("user_id")
  role      String   @default("member")
  joinedAt  DateTime @default(now()) @map("joined_at")
  channel   Channel  @relation(fields: [channelId], references: [id], onDelete: Cascade)

  @@unique([channelId, userId])
  @@map("channel_members")
}

model ChannelMessage {
  id        String   @id @default(uuid())
  channelId String   @map("channel_id")
  userId    Int      @map("user_id")
  content   String
  fileUrl   String?  @map("file_url")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  channel   Channel  @relation(fields: [channelId], references: [id], onDelete: Cascade)

  @@index([channelId, createdAt])
  @@map("channel_messages")
}

model DirectMessage {
  id         String   @id @default(uuid())
  fromUserId Int      @map("from_user_id")
  toUserId   Int      @map("to_user_id")
  content    String
  fileUrl    String?  @map("file_url")
  read       Boolean  @default(false)
  createdAt  DateTime @default(now()) @map("created_at")
  updatedAt  DateTime @updatedAt @map("updated_at")

  @@index([fromUserId, toUserId, createdAt])
  @@index([toUserId, read])
  @@map("direct_messages")
}

model Announcement {
  id         String   @id @default(uuid())
  title      String
  content    String
  type       String   @default("general")
  department String?
  authorId   Int      @map("author_id")
  pinned     Boolean  @default(false)
  createdAt  DateTime @default(now()) @map("created_at")
  updatedAt  DateTime @updatedAt @map("updated_at")

  @@map("announcements_board")
}

model UserCredential {
  email        String   @id
  userId       String?  @map("user_id")
  passwordHash String?  @map("password_hash")
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  @@map("user_credentials")
}